<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WARISHAYDAY Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="theme-default">

    <!-- Background Image Layer -->
    <div id="custom-bg-layer"></div>
    <div id="custom-bg-overlay"></div>

    <div id="customer-view">
        <header id="main-header">
            <div class="logo-area">
                <!-- โลโก้จะถูกเปลี่ยนด้วย JS หากมีการอัพโหลด -->
                <div class="logo-icon" id="main-logo-icon"><i class="fas fa-cubes"></i></div>
                <img id="main-logo-img" src="" alt="Logo" class="hidden logo-image-custom"> 
                <div>
                    <h1 id="shop-name-display">WARISHAYDAY</h1>
                    <p id="shop-slogan-display">บริการอัพเกรดรวดเร็วทันใจ</p>
                </div>
            </div>
            <div style="display:flex; gap:12px;">
                <button id="theme-toggle-btn" class="glass-btn" onclick="toggleDarkMode()" title="โหมดมืด/สว่าง">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="admin-login-btn" class="glass-btn" title="ผู้ดูแลระบบ">
                    <i class="fas fa-shield-alt"></i>
                </button>
            </div>
        </header>

        <main class="container">
            <!-- STEP 0: Category Selection (Menu) -->
            <div id="category-selector" class="fade-in">
                <div style="text-align:center; margin-bottom:30px; margin-top:10px;">
                    <h2 class="main-heading" style="font-weight:700; color:var(--text-main); letter-spacing:-0.5px;">เลือกบริการ</h2>
                    <p class="sub-text" style="color:var(--text-muted);">เลือกหมวดหมู่สินค้าที่คุณต้องการอัพเกรด</p>
                </div>
                
                <div id="dynamic-menu-grid" class="menu-grid-2x2">
                    <!-- Javascript will populate this -->
                </div>

                <div id="announcement-box" class="announcement-card hidden fade-in" style="margin-top: 25px;">
                    <div class="ann-icon"><i class="fas fa-bullhorn"></i></div>
                    <span id="announcement-text" style="line-height:1.5;"></span>
                </div>
            </div>

            <!-- CALCULATOR & ORDER SECTION (Wrapper) -->
            <div id="calculator-section" class="hidden">
                
                <!-- STEP 1: Check Limit -->
                <div id="step-1-limit" class="step-container fade-in">
                    <div class="calc-header-nav">
                        <button class="btn-back" onclick="goBackToMenu()">
                            <i class="fas fa-arrow-left"></i> กลับเมนูหลัก
                        </button>
                        <h2 id="selected-category-title">หมวดหมู่</h2> 
                    </div>

                    <div style="text-align:center; margin-bottom:20px;">
                         <h2 class="main-heading" style="font-weight:800; color:var(--text-main);">คำนวณลิมิต</h2>
                         <p class="sub-text" style="color:var(--text-muted);">ตรวจสอบจำนวนสินค้าที่คุณรับได้</p>
                    </div>

                    <div class="modern-card">
                        <div class="step-header">
                            <div class="step-number">1</div>
                            <span class="step-title">ระบุจำนวนของที่มี</span>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-hashtag"></i>
                            <input type="number" id="user-limit-input" placeholder="ใส่จำนวนที่มีปัจจุบัน (0-89)" inputmode="numeric" oninput="validateLimitInput(this)">
                        </div>
                        <div style="display:flex; gap:12px;">
                            <button id="btn-check-limit" class="btn-primary disabled" onclick="goToStep2()">
                                <i class="fas fa-calculator"></i> ตรวจสอบลิมิต
                            </button>
                            <button class="btn-secondary-icon" onclick="openHelpModal('limit')" title="วิธีเช็คลิมิต">
                                <i class="fas fa-play-circle"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- STEP 2: Select Type (Shows Limit Here) -->
                <div id="step-2-type" class="step-container hidden fade-in">
                    <div class="calc-header-nav">
                        <button class="btn-back" onclick="switchStep(1)">
                            <i class="fas fa-arrow-left"></i> ย้อนกลับ
                        </button>
                    </div>

                    <!-- Limit Display Area -->
                    <div class="result-box-compact">
                        <div class="flex-result">
                            <div>
                                <div class="result-label-sm">รับเพิ่มได้อีก</div>
                                <div class="result-number-md" id="calculated-limit-step2">0</div>
                            </div>
                            <div class="divider-vertical"></div>
                            <div>
                                <div id="limit-condition-text-step2" class="result-badge">สถานะ</div>
                            </div>
                        </div>
                    </div>

                    <div class="modern-card">
                        <div class="step-header">
                            <div class="step-number">2</div>
                            <span class="step-title">เลือกรูปแบบการซื้อ</span>
                        </div>
                        <div id="dynamic-purchase-buttons" class="grid-options">
                            <!-- JS populated -->
                        </div>
                    </div>
                </div>

                <!-- STEP 3: Select Items -->
                <div id="step-3-items" class="step-container hidden fade-in">
                    <div class="calc-header-nav">
                        <button class="btn-back" onclick="switchStep(2)">
                            <i class="fas fa-arrow-left"></i> ย้อนกลับ
                        </button>
                         <div id="limit-mini-badge" class="limit-floating-badge">ลิมิต: 0</div>
                    </div>

                    <div class="modern-card">
                        <div class="step-header" style="justify-content:space-between;">
                            <div style="display:flex; align-items:center; gap:12px;">
                                <div class="step-number">3</div>
                                <span id="order-type-title" class="step-title">ระบุสินค้า</span>
                            </div>
                            <button class="btn-secondary-icon" onclick="openHelpModal('buy')" style="width:40px; height:40px; font-size:1.1rem;">
                                <i class="fas fa-play-circle"></i>
                            </button>
                        </div>
                        
                        <div id="item-inputs-list" style="margin-bottom:25px;"></div>

                        <div class="price-summary-box">
                            <div class="row">
                                <span>รูปแบบ</span> <span id="price-status">-</span>
                            </div>
                            <div class="row total">
                                <span>ยอดสุทธิ</span> <span class="text-primary"><span id="total-price-display">0</span> ฿</span>
                            </div>
                        </div>

                        <button class="btn-primary" onclick="goToStep4()">
                            <i class="fas fa-file-invoice"></i> เพิ่มลงรายการสรุป
                        </button>
                    </div>
                </div>

                <!-- STEP 4: Summary (Cart) -->
                <div id="step-4-summary" class="step-container hidden fade-in">
                    <div class="calc-header-nav">
                        <button class="btn-back" onclick="switchStep(3)">
                            <i class="fas fa-arrow-left"></i> แก้ไขรายการ
                        </button>
                    </div>

                     <div class="modern-card" style="border-top: 4px solid var(--primary);">
                        <div style="text-align:center; margin-bottom:20px;">
                             <div class="step-header" style="justify-content:center; margin-bottom:5px;">
                                <div class="step-number">4</div>
                                <span class="step-title">สรุปรายการสั่งซื้อ</span>
                             </div>
                             <p class="sub-text">ตรวจสอบความถูกต้องก่อนส่ง</p>
                        </div>
                        
                        <div id="cart-preview-area" class="cart-bill"></div>
                        
                        <div style="margin-top:25px;">
                             <button id="btn-confirm-order" class="btn-success" onclick="confirmOrder()">
                                <i class="fas fa-paper-plane"></i> คัดลอก & ส่งออเดอร์
                             </button>
                        </div>
                     </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Modals (Admin Login, Theme, Help, Copy Overlay) -->
    
    <div id="admin-login-modal" class="overlay-backdrop hidden">
        <div class="modal-window center-content">
            <div class="login-icon"><i class="fas fa-user-shield"></i></div>
            <h3 style="color:var(--text-main); margin-bottom:20px; font-weight:700;">เข้าสู่ระบบจัดการ</h3>
            <div class="input-group">
                <i class="fas fa-key"></i>
                <input type="password" id="admin-pin" placeholder="กรอกรหัส PIN 4 หลัก" maxlength="6" style="text-align:center; letter-spacing:5px; font-weight:bold;">
            </div>
            <div style="display:grid; gap:10px; margin-top:20px;">
                <button onclick="verifyAdmin()" class="btn-primary">เข้าสู่ระบบ</button>
                <button onclick="closeAdminLogin()" class="btn-back" style="justify-content:center; width:100%;">ยกเลิก</button>
            </div>
        </div>
    </div>

    <!-- Admin Panel Structure -->
    <div id="admin-panel" class="admin-layout hidden">
        <aside class="admin-sidebar" id="adminSidebar">
            <div class="sidebar-header" style="padding:20px;">
                <div class="brand-admin"><i class="fas fa-user-cog"></i> Admin Panel</div>
            </div>
            <nav class="sidebar-menu">
                <button class="menu-link active" onclick="switchAdminTab('dashboard')">
                    <i class="fas fa-chart-pie"></i> ภาพรวม (Dashboard)
                </button>
                <button class="menu-link" onclick="switchAdminTab('orders')">
                    <i class="fas fa-receipt"></i> รายการสั่งซื้อ (Orders)
                </button>
                <button class="menu-link" onclick="switchAdminTab('products')">
                    <i class="fas fa-boxes"></i> สินค้า & หมวดหมู่
                </button>
                <button class="menu-link" onclick="switchAdminTab('prices')">
                    <i class="fas fa-tags"></i> ตั้งราคา (Prices)
                </button>
                <button class="menu-link" onclick="switchAdminTab('general')">
                    <i class="fas fa-sliders-h"></i> ตั้งค่าระบบ (Settings)
                </button>
            </nav>
            <div class="sidebar-footer">
                <button onclick="logoutAdmin()" class="btn-logout"><i class="fas fa-power-off"></i> ออกจากระบบ</button>
            </div>
        </aside>

        <div class="admin-content-wrapper">
            <header class="admin-topbar">
                <div style="display:flex; align-items:center; gap:15px;">
                    <button class="mobile-toggle glass-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
                    <h2 class="page-title" id="admin-page-title">Dashboard</h2>
                </div>
                <div style="display:flex; gap:10px; align-items:center;">
                    <button class="btn-back-home" onclick="exitAdmin()">
                        <i class="fas fa-home"></i> กลับหน้าร้าน
                    </button>
                </div>
            </header>

            <!-- Dashboard Tab (Updated) -->
            <div id="tab-dashboard" class="admin-tab-content fade-in">
                <!-- Date Filter Row -->
                <div class="filter-row" style="margin-bottom: 20px; display:flex; justify-content:flex-end;">
                     <div style="display:flex; align-items:center; gap:10px; background:white; padding:5px 15px; border-radius:30px; border:1px solid #ddd;">
                        <i class="fas fa-calendar-alt" style="color:var(--primary);"></i>
                        <span style="font-size:0.9rem; font-weight:600;">วันที่:</span>
                        <input type="date" id="dash-date-filter" class="date-picker-input" onchange="renderAdminDashboard()">
                     </div>
                </div>

                <!-- Row 1: Stats (3 cols) -->
                 <div class="dashboard-grid stats-row-layout">
                    <div class="stat-card blue">
                        <div class="stat-icon"><i class="fas fa-calendar-day"></i></div>
                        <div class="stat-info">
                            <h4>วันนี้</h4>
                            <div class="stat-val" id="dash-sales-today">0 ฿</div>
                        </div>
                    </div>
                    <div class="stat-card green">
                        <div class="stat-icon"><i class="fas fa-calendar-alt"></i></div>
                        <div class="stat-info">
                            <h4>เดือนนี้</h4>
                            <div class="stat-val" id="dash-sales-month">0 ฿</div>
                        </div>
                    </div>
                    <div class="stat-card orange">
                        <div class="stat-icon"><i class="fas fa-calendar"></i></div>
                        <div class="stat-info">
                            <h4>ปีนี้</h4>
                            <div class="stat-val" id="dash-sales-year">0 ฿</div>
                        </div>
                    </div>
                </div>

                <!-- Row 2: Category & Type Charts -->
                <div class="dashboard-split">
                    <div class="admin-card">
                        <div class="card-head"><h4><i class="fas fa-chart-pie"></i> ยอดขายตามหมวดหมู่</h4></div>
                        <div class="chart-wrapper-flex">
                            <div class="chart-summary-list" id="summary-list-category"></div>
                            <div class="chart-container-responsive"><canvas id="chart-category"></canvas></div>
                        </div>
                    </div>
                    <div class="admin-card">
                        <div class="card-head"><h4><i class="fas fa-chart-bar"></i> ยอดขายตามรูปแบบ</h4></div>
                        <div class="chart-wrapper-flex">
                            <div class="chart-summary-list" id="summary-list-type"></div>
                            <div class="chart-container-responsive"><canvas id="chart-type"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- Row 3: Timeline & Items Charts -->
                <div class="dashboard-split">
                    <div class="admin-card">
                         <div class="card-head"><h4><i class="fas fa-chart-line"></i> สรุปยอดขายรวม (Timeline)</h4></div>
                         <div class="chart-wrapper-flex column">
                            <div class="chart-summary-horizontal" id="summary-list-total"></div>
                            <div class="chart-container large"><canvas id="chart-summary"></canvas></div>
                         </div>
                    </div>
                    <div class="admin-card">
                         <div class="card-head"><h4><i class="fas fa-box"></i> ยอดขายรายสินค้า (Top 10)</h4></div>
                         <div class="chart-wrapper-flex">
                             <div class="chart-summary-list" id="summary-list-items"></div>
                             <div class="chart-container large"><canvas id="chart-items"></canvas></div>
                         </div>
                    </div>
                </div>
            </div>

            <!-- Orders Tab (Updated) -->
            <div id="tab-orders" class="admin-tab-content hidden fade-in">
                 <div class="admin-card" style="padding: 15px;">
                     <!-- Search Bar -->
                     <div class="order-search-box">
                         <i class="fas fa-search"></i>
                         <input type="text" id="order-search-input" placeholder="ค้นหา Order ID..." oninput="searchOrder(this.value)">
                     </div>
                     
                     <!-- Order Tabs -->
                     <div class="order-tabs-nav">
                         <button class="order-tab-btn active" onclick="switchOrderSubTab('new')">
                            <i class="fas fa-star"></i> ออเดอร์ใหม่ <span id="badge-new" class="tab-badge">0</span>
                         </button>
                         <button class="order-tab-btn" onclick="switchOrderSubTab('confirmed')">
                            <i class="fas fa-check-circle"></i> คอนเฟิร์ม <span id="badge-confirmed" class="tab-badge">0</span>
                         </button>
                         <button class="order-tab-btn" onclick="switchOrderSubTab('cancelled')">
                            <i class="fas fa-times-circle"></i> ยกเลิก <span id="badge-cancelled" class="tab-badge">0</span>
                         </button>
                     </div>

                     <!-- Content Areas -->
                     <div id="order-content-new" class="order-sub-content">
                         <!-- New Orders List -->
                     </div>
                     <div id="order-content-confirmed" class="order-sub-content hidden">
                         <!-- Confirmed Orders List -->
                     </div>
                     <div id="order-content-cancelled" class="order-sub-content hidden">
                         <!-- Cancelled Orders List -->
                         <div class="text-right" style="margin-bottom:10px;">
                             <button class="btn-text-danger" onclick="clearAllCancelledOrders()">
                                 <i class="fas fa-trash-alt"></i> ล้างออเดอร์ทั้งหมด
                             </button>
                         </div>
                         <div id="list-cancelled-container"></div>
                     </div>
                 </div>
            </div>

            <!-- Products Tab -->
            <div id="tab-products" class="admin-tab-content hidden fade-in">
                <div class="admin-card">
                    <div class="card-head" style="flex-wrap:wrap; gap:10px;">
                        <h4>จัดการสินค้า & หมวดหมู่</h4>
                        <button class="action-btn-sm" onclick="openAddCategoryModal()" style="width:auto; padding:0 15px; background:var(--primary); color:white;">
                            <i class="fas fa-plus"></i> เพิ่มหมวดหมู่
                        </button>
                    </div>
                    <div class="stock-tabs" id="stock-category-tabs"></div>
                    <div id="stock-manage-area" class="stock-grid-layout"></div>
                    <button class="btn-primary" style="margin-top:20px; width:auto;" onclick="saveStockChanges()">
                        <i class="fas fa-save"></i> บันทึกข้อมูลสินค้าทั้งหมด
                    </button>
                    <div style="margin-top:15px; font-size:0.9rem; color:#ef4444; cursor:pointer;" onclick="deleteCurrentCategory()">
                        <i class="fas fa-trash-alt"></i> ลบหมวดหมู่นี้
                    </div>
                </div>
            </div>

             <!-- Prices Tab -->
             <div id="tab-prices" class="admin-tab-content hidden fade-in">
                <div class="admin-card">
                    <div class="card-head"><h4>ตั้งค่าราคา (Price Configuration)</h4></div>
                    <div class="alert-box" style="background:#e0f2fe; color:#0369a1; padding:15px; border-radius:8px; margin-bottom:20px; border:1px solid #bae6fd;">
                        <i class="fas fa-info-circle"></i> <b>หลักการคิดเงิน:</b> ระบบจะคำนวณราคาตามถาด (1 ถาด = 10 ชิ้น) เป็นหลัก หากเกินราคาเหมาจะใช้ราคาเหมา
                    </div>
                    <div class="price-config-grid" id="dynamic-price-config"></div>
                    <button onclick="savePriceSettings()" class="btn-primary" style="margin-top:20px;">บันทึกราคา</button>
                </div>
             </div>

             <!-- General Settings Tab (Updated Layout) -->
             <div id="tab-general" class="admin-tab-content hidden fade-in">
                 
                 <!-- Section 1: General Info -->
                 <div class="admin-card">
                     <div class="card-head"><h4><i class="fas fa-store"></i> ข้อมูลทั่วไป</h4></div>
                     <div class="form-grid cols-2">
                        <div>
                            <label class="form-label">ชื่อร้านค้า</label>
                            <input type="text" id="edit-shop-name" class="form-control" placeholder="ชื่อร้าน...">
                        </div>
                        <div>
                            <label class="form-label">สโลแกน</label>
                            <input type="text" id="edit-shop-slogan" class="form-control" placeholder="สโลแกน...">
                        </div>
                     </div>
                     <div class="form-grid cols-2" style="margin-top:15px;">
                         <div>
                            <label class="form-label">โลโก้ร้าน (PNG/JPG)</label>
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div id="preview-logo-settings" style="width:50px; height:50px; background:#f1f5f9; border-radius:10px; display:flex; align-items:center; justify-content:center; overflow:hidden;">
                                    <i class="fas fa-image" style="color:#ccc;"></i>
                                </div>
                                <div style="flex:1;">
                                    <input type="file" id="file-logo-upload" accept="image/*" class="form-control">
                                    <input type="hidden" id="edit-logo-url">
                                </div>
                            </div>
                            <button class="btn-text-danger" onclick="clearLogo()" style="font-size:0.8rem; margin-top:5px;">รีเซ็ตโลโก้เดิม</button>
                         </div>
                         <div>
                            <label class="form-label">ประกาศหน้าเว็บ</label>
                            <textarea id="edit-announcement" class="form-control" rows="2" placeholder="ข้อความประกาศ..."></textarea>
                         </div>
                     </div>
                     <div style="margin-top:15px;">
                         <label class="form-label">ธีมร้านค้า</label>
                         <button class="btn-secondary-icon" onclick="openThemeSelector()" style="width:100%; font-size:1rem; gap:10px; border-radius:8px;">
                            <i class="fas fa-palette"></i> เลือกสีธีม
                        </button>
                     </div>
                 </div>

                 <!-- Section 2: Font Size -->
                 <div class="admin-card">
                    <div class="card-head"><h4><i class="fas fa-font"></i> ปรับขนาดตัวอักษร</h4></div>
                    <div class="form-grid cols-2">
                        <div>
                            <label class="form-label">หัวข้อ (Heading Size)</label>
                            <div style="display:flex; align-items:center; gap:10px;">
                                <span style="font-size:0.8rem;">A</span>
                                <input type="range" id="edit-font-heading" min="14" max="32" value="20" oninput="previewFonts()">
                                <span style="font-size:1.2rem;">A</span>
                            </div>
                        </div>
                        <div>
                            <label class="form-label">เนื้อหา (Body Size)</label>
                            <div style="display:flex; align-items:center; gap:10px;">
                                <span style="font-size:0.8rem;">a</span>
                                <input type="range" id="edit-font-body" min="12" max="24" value="16" oninput="previewFonts()">
                                <span style="font-size:1.2rem;">a</span>
                            </div>
                        </div>
                    </div>
                 </div>

                 <!-- Section 3: Background -->
                 <div class="admin-card">
                    <div class="card-head"><h4><i class="fas fa-image"></i> ปรับแต่งพื้นหลัง</h4></div>
                    <div class="form-grid cols-2">
                        <div>
                            <label class="form-label">รูปภาพพื้นหลัง</label>
                            <input type="file" id="file-bg-image" accept="image/*" class="form-control">
                            <input type="hidden" id="edit-bg-url">
                            <button class="btn-text-danger" onclick="clearBackgroundImage()" style="margin-top:10px; font-size:0.9rem;">ลบรูปภาพ</button>
                        </div>
                        <div>
                            <label class="form-label">ความคมชัดพื้นหลัง (Overlay Opacity)</label>
                            <div style="display:flex; align-items:center; gap:10px;">
                                <span style="font-size:0.8rem;">สว่าง</span>
                                <input type="range" id="edit-bg-overlay" min="0" max="95" value="50" oninput="previewBackgroundOverlay()">
                                <span style="font-size:0.8rem;">มืด</span>
                            </div>
                        </div>
                    </div>
                    <div class="opacity-control-box" style="margin-top:15px; margin-bottom:0;">
                        <label class="form-label">ความโปร่งแสงของ UI Admin</label>
                        <input type="range" id="edit-color-intensity" min="0" max="100" value="50" oninput="previewVisuals()" style="width:100%;">
                    </div>
                 </div>

                 <!-- Section 4: Help Content -->
                 <div class="admin-card">
                     <div class="card-head"><h4><i class="fas fa-video"></i> วิดีโอคู่มือ (Help Content)</h4></div>
                     <div class="form-grid cols-2">
                        <div style="background:#f8fafc; padding:15px; border-radius:8px; border:1px solid #e2e8f0;">
                            <h6 style="font-weight:700; margin-bottom:10px;">วิธีเช็คลิมิต</h6>
                            <input type="file" id="file-video-limit" accept="video/*" class="form-control" style="margin-bottom:5px;">
                            <input type="text" id="edit-video-limit" class="form-control" placeholder="หรือ URL..." style="margin-bottom:10px;">
                            <textarea id="edit-desc-limit" class="form-control" rows="2" placeholder="คำอธิบาย..."></textarea>
                        </div>
                        <div style="background:#f8fafc; padding:15px; border-radius:8px; border:1px solid #e2e8f0;">
                            <h6 style="font-weight:700; margin-bottom:10px;">วิธีกดสินค้า</h6>
                            <input type="file" id="file-video-buy" accept="video/*" class="form-control" style="margin-bottom:5px;">
                            <input type="text" id="edit-video-buy" class="form-control" placeholder="หรือ URL..." style="margin-bottom:10px;">
                            <textarea id="edit-desc-buy" class="form-control" rows="2" placeholder="คำอธิบาย..."></textarea>
                        </div>
                     </div>
                 </div>
                 
                 <button onclick="saveGeneralSettings()" class="btn-primary" style="margin-top:20px; font-size:1.1rem; padding:15px;">
                    <i class="fas fa-save"></i> บันทึกการตั้งค่าทั้งหมด
                </button>
             </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="add-category-modal" class="overlay-backdrop hidden">
        <div class="modal-window center-content">
            <h3 style="margin-bottom:15px;">เพิ่มหมวดหมู่ใหม่</h3>
            <div class="input-group">
                <i class="fas fa-tag"></i>
                <input type="text" id="new-cat-name" placeholder="ชื่อหมวดหมู่ (เช่น อุปกรณ์เหมือง)" class="form-control">
            </div>
            <div class="input-group" style="margin-top:10px;">
                <i class="fas fa-id-card"></i>
                <input type="text" id="new-cat-id" placeholder="รหัสหมวด (ภาษาอังกฤษ เช่น mine)" class="form-control">
            </div>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:20px; width:100%;">
                <button onclick="confirmAddCategory()" class="btn-primary">ยืนยัน</button>
                <button onclick="document.getElementById('add-category-modal').classList.add('hidden')" class="btn-back" style="justify-content:center; width:100%;">ยกเลิก</button>
            </div>
        </div>
    </div>

    <!-- Order Detail Modal (New) -->
    <div id="order-detail-modal" class="overlay-backdrop hidden">
        <div class="modal-window">
             <div class="modal-header">
                <h3>รายละเอียดออเดอร์</h3>
                <button onclick="closeOrderDetail()" class="btn-back"><i class="fas fa-times"></i></button>
            </div>
            <div id="order-detail-content" style="padding:20px; background:#f8fafc; border-radius:12px; margin-top:10px;"></div>
        </div>
    </div>

    <div id="theme-modal" class="overlay-backdrop hidden">
        <div class="modal-window">
            <div class="modal-header">
                <h3>เลือกธีมสี</h3>
                <button onclick="closeThemeSelector()" class="btn-back"><i class="fas fa-times"></i></button>
            </div>
            <div id="theme-grid" class="theme-grid-layout" style="padding:20px 0;"></div>
        </div>
    </div>

    <div id="help-modal" class="overlay-backdrop hidden">
        <div class="modal-window video-window">
            <div class="modal-header">
                <h3 id="help-title">ช่วยเหลือ</h3>
                <button onclick="closeHelpModal()" class="btn-back"><i class="fas fa-times"></i></button>
            </div>
            <div class="video-container">
                <iframe id="help-video-frame" src="" frameborder="0" allowfullscreen style="width:100%; height:100%; display:none;"></iframe>
                <video id="help-video-player" controls style="width:100%; height:100%; display:none;"></video>
                <div id="help-no-video" style="color:#aaa; display:none;">ไม่มีวิดีโอ</div>
            </div>
            <div style="padding:20px; background:white; max-height:150px; overflow-y:auto;">
                <p id="help-desc-text" style="color:var(--text-main); line-height:1.6;"></p>
            </div>
        </div>
    </div>

    <div id="copy-overlay" class="overlay-backdrop hidden">
        <div class="modal-window text-center">
            <div class="success-icon"><i class="fas fa-check"></i></div>
            <h2 class="text-success">คัดลอกสำเร็จ!</h2>
            <p>พร้อมส่งให้แอดมินแล้ว</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>